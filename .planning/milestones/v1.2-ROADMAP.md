# Milestone v1.2: Algorithmic Identity Proving

**Status:** SHIPPED 2026-02-16
**Phases:** 13-17
**Total Plans:** 14
**Timeline:** 2026-02-15 to 2026-02-16 (2 days)
**Execution Time:** ~124 min (avg 9 min/plan)

## Overview

Machine-prove q-hypergeometric identities using q-Gosper, q-Zeilberger, creative telescoping, and WZ certificates -- completing the transition from Garvan's Maple toolbox to a self-contained proving engine. Added polynomial infrastructure, four algorithmic modules, Python API bindings, and Sphinx documentation.

## Phases

### Phase 13: Polynomial Infrastructure
**Goal**: Exact polynomial and rational function arithmetic over QRat is available as a foundation for algorithmic identity proving
**Depends on**: Nothing (builds on existing QRat/QInt from v1.0)
**Requirements**: POLY-01, POLY-02, POLY-03, POLY-04, POLY-05
**Success Criteria** (what must be TRUE):
  1. User can construct QRatPoly from coefficients, perform add/sub/mul/div/rem, and get exact QRat results
  2. Polynomial GCD of two polynomials with rational coefficients returns the correct monic GCD without coefficient explosion
  3. Polynomial resultant correctly identifies when two polynomials share a common root
  4. q-shift evaluation p(q^j * x) returns correct polynomial for arbitrary integer j
  5. Rational functions (quotient of two polynomials) support arithmetic and automatic GCD-based simplification
**Plans**: 3 plans

Plans:
- [x] 13-01-PLAN.md -- QRatPoly type with constructors, arithmetic, div/rem, content, eval, Display
- [x] 13-02-PLAN.md -- Subresultant PRS GCD, resultant, q-shift operations
- [x] 13-03-PLAN.md -- QRatRationalFunc with auto-simplification, arithmetic, integration tests

### Phase 14: q-Gosper Algorithm
**Goal**: Users can determine whether a q-hypergeometric sum has a closed-form antidifference, and obtain it when one exists
**Depends on**: Phase 13 (polynomial arithmetic)
**Requirements**: GOSP-01, GOSP-02, GOSP-03, GOSP-04, GOSP-05
**Success Criteria** (what must be TRUE):
  1. Given a HypergeometricSeries, the term ratio t(k+1)/t(k) is correctly extracted as a rational function of q^k
  2. q-dispersion computation correctly finds all integer shifts j where gcd(a(x), b(q^j * x)) is nontrivial
  3. qGFF decomposition produces sigma, tau, p factors satisfying the Gosper normal form constraints
  4. The complete q-Gosper algorithm returns Summable(antidifference) for known summable series (e.g., q-Vandermonde) and NotSummable for non-summable ones
**Plans**: 3 plans

Plans:
- [x] 14-01-PLAN.md -- Term ratio extraction (GOSP-01) and q-dispersion computation (GOSP-02)
- [x] 14-02-PLAN.md -- Gosper normal form decomposition (GOSP-03) and key equation solver (GOSP-04)
- [x] 14-03-PLAN.md -- Complete q-Gosper algorithm (GOSP-05) with integration tests

### Phase 15: q-Zeilberger & WZ Certificates
**Goal**: Users can prove q-hypergeometric identities by obtaining recurrences via creative telescoping and verifying them with WZ certificates
**Depends on**: Phase 14 (q-Gosper as subroutine)
**Requirements**: ZEIL-01, ZEIL-02, ZEIL-03, ZEIL-04, ZEIL-05
**Success Criteria** (what must be TRUE):
  1. Creative telescoping finds a recurrence for the q-Vandermonde sum at order d=1
  2. The recurrence output provides polynomial coefficients c_0(q^n), ..., c_d(q^n) that the user can inspect
  3. A WZ proof certificate is extracted and independently verified against the recurrence
  4. User-supplied WZ certificates are accepted and verified (not just internally generated ones)
  5. FPS cross-verification confirms the recurrence matches numerical series expansion to a given order
**Plans**: 3 plans

Plans:
- [x] 15-01-PLAN.md -- N-direction shift ratios, extended key equation solver, creative telescoping core (ZEIL-01)
- [x] 15-02-PLAN.md -- Public q_zeilberger function with recurrence output and WZ certificate extraction (ZEIL-02, ZEIL-03)
- [x] 15-03-PLAN.md -- WZ certificate verification and FPS cross-check (ZEIL-04, ZEIL-05)

### Phase 16: Extensions
**Goal**: Users can solve recurrences for closed forms, prove nonterminating identities, and discover transformation chains between hypergeometric series
**Depends on**: Phase 14 (q-Gosper for nonterminating proofs), Phase 15 (q-Zeilberger recurrences for solving)
**Requirements**: SOLV-01, SOLV-02, NTPR-01, NTPR-02, TRNS-01, TRNS-02
**Success Criteria** (what must be TRUE):
  1. q-Petkovsek finds q-hypergeometric solutions of recurrences produced by q-Zeilberger
  2. Closed-form output is expressed as products of q-Pochhammer symbols and q-powers
  3. Nonterminating identities are proved by parameter specialization (Chen-Hou-Mu method) reducing to terminating q-Zeilberger problems
  4. Transformation chain search finds known paths (e.g., Heine transform sequences) between two hypergeometric series within a configurable depth bound
**Plans**: 3 plans

Plans:
- [x] 16-01-PLAN.md -- q-Petkovsek recurrence solver with Pochhammer closed-form output (SOLV-01, SOLV-02)
- [x] 16-02-PLAN.md -- Chen-Hou-Mu nonterminating identity proofs via parameter specialization (NTPR-01, NTPR-02)
- [x] 16-03-PLAN.md -- BFS transformation chain search over Heine/Sears/Watson catalog (TRNS-01, TRNS-02)

### Phase 17: Python API & Documentation
**Goal**: All v1.2 algorithms are accessible from Python with the same quality of documentation as existing functions
**Depends on**: Phases 13-16 (stable Rust interfaces)
**Requirements**: API-01, API-02, API-03, API-04
**Success Criteria** (what must be TRUE):
  1. Python functions q_gosper, q_zeilberger, verify_wz, q_petkovsek work from `import q_kangaroo`
  2. Python functions prove_nonterminating and find_transformation_chain work from `import q_kangaroo`
  3. All new functions have NumPy-style docstrings with LaTeX mathematical notation
  4. Sphinx API reference pages for the new functions are integrated into the existing documentation site
**Plans**: 2 plans

Plans:
- [x] 17-01-PLAN.md -- q_zeilberger, verify_wz, q_petkovsek DSL functions + q_gosper stub fix (API-01)
- [x] 17-02-PLAN.md -- prove_nonterminating, find_transformation_chain DSL functions + Sphinx docs (API-02, API-03, API-04)

---

## Milestone Summary

**Key Decisions:**
- Dense Vec<QRat> ascending-degree storage with trailing-zero normalization invariant (13-01)
- Subresultant PRS for GCD with content extraction before PRS loop (13-02)
- Auto-reduce via poly_gcd on every construction for canonical form at all times (13-03)
- Direct term-value approach instead of polynomial key equation evaluation for creative telescoping (15-01)
- Lagrange interpolation for WZ certificate construction from G(n,k) values (15-01)
- Characteristic polynomial + Rational Root Theorem for constant-coeff recurrences (16-01)
- BFS (not DFS) for shortest-path guarantee in transformation chains (16-03)
- Scalar (QRat) rhs_builder interface for prove_nonterminating (16-02)
- Closure-from-template design for prove_nonterminating Python wrapper (17-02)
- verify_wz internally re-derives certificate (QRatRationalFunc can't cross PyO3 FFI) (17-01)

**Issues Resolved:**
- Degree bound fallback needed for q-power cancellation in Gosper key equation (14-02, 14-03)
- WZ certificate boundary conditions G(n,0)=0 for correct telescoping (15-01)
- Include k=0 boundary in Lagrange interpolation for R(1)=0 (15-02)
- verify_recurrence_fps must re-derive recurrence at each n (concrete-q coeffs are n-specific) (15-03)

**Issues Deferred:**
- Full q-Petkovsek normal form (only constant-coefficient recurrences handled) (16-01)
- Multi-sum creative telescoping (MSUM-01 deferred to future milestone)

**Technical Debt Incurred:**
- qrat_pow_i64 duplicated in 4 modules (gosper.rs, zeilberger.rs, nonterminating.rs, dsl.rs) â€” could be consolidated
- No Python runtime tests for v1.2 functions (Cygwin build lacks Python; tested via cargo check + type stubs only)

---

_For current project status, see .planning/ROADMAP.md_
