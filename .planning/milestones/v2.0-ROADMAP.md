# Milestone v2.0: Maple Compatibility

**Status:** SHIPPED 2026-02-20
**Phases:** 33-40
**Total Plans:** 21

## Overview

Every qseries/thetaids function can be called with Garvan's exact Maple syntax -- researchers copy-paste from Maple worksheets and get correct results. The REPL is now a drop-in replacement for Garvan's Maple qseries package (univariate functions).

## Phases

### Phase 33: Symbolic Variable Foundation
**Goal**: Users can type bare variable names, pass `q` as a function argument, and use q-monomials like `q^2` as parameters -- the prerequisite for all Maple-compatible signatures
**Depends on**: Phase 32 (existing CLI infrastructure)
**Requirements**: SYM-01, SYM-02, SYM-03, SYM-04
**Plans**: 3 plans

Plans:
- [x] 33-01-PLAN.md -- Value::Symbol variant, Token::Q/AstNode::Q removal, symbol fallback, test updates
- [x] 33-02-PLAN.md -- Symbol arithmetic (pow/mul/add/sub), polynomial display, variable-aware formatting
- [x] 33-03-PLAN.md -- Function dispatch with symbol args, single-quote lexer, restart/anames/unassign, integration tests

### Phase 34: Product & Theta Signatures
**Goal**: All product and theta functions accept Garvan's exact argument lists so researchers can call them identically to Maple
**Depends on**: Phase 33
**Requirements**: SIG-01, SIG-02, SIG-03, SIG-04, SIG-05, SIG-06, SIG-07, SIG-26
**Plans**: 2 plans

Plans:
- [x] 34-01-PLAN.md -- Maple-style dispatch for jacprod, tripleprod, quinprod, winquist, qbin, etaq multi-delta
- [x] 34-02-PLAN.md -- numbpart alias reversal, help text updates, tab completion, integration tests

### Phase 35: Series Analysis Signatures
**Goal**: Series analysis functions accept Garvan's calling conventions so sifting, product-make, and factoring workflows match Maple exactly
**Depends on**: Phase 34
**Requirements**: SIG-08, SIG-09, SIG-10, SIG-11, SIG-12, SIG-13, SIG-14
**Plans**: 2 plans

Plans:
- [x] 35-01-PLAN.md -- Core jacprodmake period filter, Maple-style dispatch for all 7 functions, unit tests
- [x] 35-02-PLAN.md -- Help text updates for all 7 functions, CLI integration tests

### Phase 36: Relation Discovery Signatures
**Goal**: All relation-finding functions accept Garvan's signatures including symbolic label lists, and output uses those labels in results
**Depends on**: Phase 33, Phase 34
**Requirements**: SIG-15, SIG-16, SIG-17, SIG-18, SIG-19, SIG-20, SIG-21, SIG-22, SIG-23, SIG-24, SIG-25, OUT-01, OUT-02
**Plans**: 3 plans

Plans:
- [x] 36-01-PLAN.md -- Core: pub monomial generators, Garvan findcong algorithm with GCD factoring
- [x] 36-02-PLAN.md -- Dispatch: all 11 functions with Garvan signatures, formatting helpers, unit tests
- [x] 36-03-PLAN.md -- Help text updates for all functions, CLI integration tests

### Phase 37: New Functions - Theta & Jacobi
**Goal**: The four theta/Jacobi conversion functions are available, enabling workflows that convert between theta, Jacobi product, and q-series representations
**Depends on**: Phase 34
**Requirements**: NEW-01, NEW-02, NEW-03, NEW-04
**Plans**: 2 plans

Plans:
- [x] 37-01-PLAN.md -- Value::JacobiProduct type, JAC constructor, arithmetic, formatting, theta/jac2prod/jac2series dispatch
- [x] 37-02-PLAN.md -- qs2jaccombo dispatch, help text for all 5 functions, tab completion, integration tests

### Phase 38: New Functions - Analysis & Discovery
**Goal**: Four analysis/discovery functions are available (checkmult, checkprod, lqdegree0, findprod), completing the univariate Garvan function inventory
**Depends on**: Phase 35
**Requirements**: NEW-05, NEW-06, NEW-07, NEW-09 (NEW-08 zqfactor deferred -- requires bivariate infrastructure)
**Plans**: 2 plans

Plans:
- [x] 38-01-PLAN.md -- All 4 function dispatch arms (lqdegree0, checkmult, checkprod, findprod) + helpers + unit tests
- [x] 38-02-PLAN.md -- Help text for all 4 functions, general help listing, CLI integration tests

### Phase 39: Output & Compatibility
**Goal**: Series display matches Maple conventions and all existing v1.x calling conventions still work as aliases
**Depends on**: Phase 34, Phase 35, Phase 36, Phase 37, Phase 38
**Requirements**: OUT-03, COMPAT-01, COMPAT-02
**Plans**: 2 plans

Plans:
- [x] 39-01-PLAN.md -- Descending display ordering in format_series()/fps_to_latex(), test assertion updates, help example updates
- [x] 39-02-PLAN.md -- Backward compatibility integration test suite for all v1.x signatures

### Phase 40: Documentation
**Goal**: All documentation reflects the new Maple-compatible signatures so users can learn the system from any entry point
**Depends on**: Phase 39
**Requirements**: DOC-01, DOC-02, DOC-03, DOC-04, DOC-05, DOC-06
**Plans**: 5 plans

Plans:
- [x] 40-01-PLAN.md -- Products (ch05), Partitions (ch06), Theta (ch07) Garvan signature overhaul + 5 new entries
- [x] 40-02-PLAN.md -- Series Analysis (ch08), Relations (ch09) Garvan signature overhaul + 3 new entries
- [x] 40-03-PLAN.md -- Function count fixes (ch00-04, ch02), numbpart rename, tab completion fix, README, help/Python verification
- [x] 40-04-PLAN.md -- Migration guide (ch14) complete workflow-oriented rewrite
- [x] 40-05-PLAN.md -- Worked examples (ch13) rewrite with Garvan-canonical signatures and descending output order

---

## Milestone Summary

**Key Decisions:**
- Value::Symbol(String) for bare symbol names; symbol fallback on undefined names
- POLYNOMIAL_ORDER = 1B sentinel for exact polynomial display
- Single-quote strings reuse Token::StringLit (no new token variant)
- numbpart canonical, partition_count alias (reversed from v1.x)
- JacobiProduct uses Vec<(a,b,exponent)> sorted by (b,a) as canonical form
- FormalPowerSeries::iter() returns DoubleEndedIterator for descending display
- All v1.x signatures preserved as backward-compatible aliases
- zqfactor deferred (requires bivariate z,q infrastructure)

**Issues Resolved:**
- etaq Garvan dispatch bug: computed (q^d; q)_inf instead of (q^d; q^d)_inf for d>1 (fixed in 40-05)
- 8 legacy function calls found in manual chapters 01/03/04 after initial Phase 40 execution (fixed in gap closure)

**Issues Deferred:**
- NEW-08 zqfactor: requires bivariate (z,q)-series infrastructure not yet in engine

**Technical Debt Incurred:**
- None significant

---

_For current project status, see .planning/ROADMAP.md_
