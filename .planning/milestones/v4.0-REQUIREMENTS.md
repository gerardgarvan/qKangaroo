# Requirements Archive: q-Kangaroo v4.0

**Archived:** 2026-02-21
**Status:** All requirements complete (14/14)

## v4.0 Requirements

### Bug Fixes

- [x] **FIX-01**: `aqprod(q,q,n)` in 3-arg mode computes the full finite polynomial `(q;q)_n` instead of truncating to O(q^n)
- [x] **FIX-02**: `theta2(q,T)`, `theta3(q,T)`, `theta4(q,T)` accept Garvan's 2-arg form (variable + truncation order)
- [x] **FIX-03**: `qfactor` displays results in q-product form `(1-q^a)(1-q^b)...` instead of raw struct
- [x] **FIX-04**: `etamake` displays results in eta(k*tau) notation instead of raw struct
- [x] **FIX-05**: `qfactor(f,T)` accepts Garvan's 2-arg signature (f + upper bound T) in addition to `qfactor(f,q,T)`

### Language Features

- [x] **LANG-01**: User can use `"` (ditto operator) to reference the last computed result
- [x] **LANG-02**: User can define lambda functions with arrow operator: `F := q -> expr`
- [x] **LANG-03**: User can call `min(a,b,c)` to compute the minimum of integer/rational arguments
- [x] **LANG-04**: User can use fractional q-powers: `q^(1/4)`, `q^(1/3)`
- [x] **LANG-05**: User can write `option remember` before `local` in procedures (either order accepted)

### New Functions

- [x] **FUNC-01**: `jac2series(jacexpr, T)` converts Jacobi-type products to theta-series
- [x] **FUNC-02**: `radsimp(expr)` simplifies rational series expressions (identity function)
- [x] **FUNC-03**: `quinprod(z,q,prodid)` and `quinprod(z,q,seriesid)` display quintuple product identity forms
- [x] **FUNC-04**: `subs(X[1]=val1, X[2]=val2, ..., expr)` substitutes indexed variables

## Traceability

| Requirement | Phase | Status | Outcome |
|-------------|-------|--------|---------|
| FIX-01 | Phase 48 | Complete | POLYNOMIAL_ORDER sentinel for exact polynomials |
| FIX-02 | Phase 48 | Complete | Garvan 2-arg theta dispatch |
| FIX-03 | Phase 49 | Complete | QProduct variant with product notation |
| FIX-04 | Phase 49 | Complete | EtaQuotient variant with eta notation |
| FIX-05 | Phase 48 | Complete | Integer detection for 2-arg disambiguation |
| LANG-01 | Phase 47 | Complete | Byte-lookahead for ditto vs string literal |
| LANG-02 | Phase 47 | Complete | Arrow desugars to Value::Procedure |
| LANG-03 | Phase 48 | Complete | Variadic min/max with type preservation |
| LANG-04 | Phase 47 | Complete | FractionalPowerSeries with auto-simplification |
| LANG-05 | Phase 47 | Complete | Either-order loop for option/local |
| FUNC-01 | Phase 50 | Complete | Triple product convention for JAC(0,b) |
| FUNC-02 | Phase 50 | Complete | Identity function for Maple compat |
| FUNC-03 | Phase 50 | Complete | Value::String display for identity modes |
| FUNC-04 | Phase 50 | Complete | Name-mangling X[i] subscript syntax |

---
*Requirements defined: 2026-02-21*
*Archived: 2026-02-21 after v4.0 milestone completion*
